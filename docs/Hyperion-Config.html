<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hyperion.Config</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">hyperion-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Hyperion.Config.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Hyperion.Config</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:HyperionConfig">HyperionConfig</a> = <a href="#v:HyperionConfig">HyperionConfig</a> {<ul class="subs"><li><a href="#v:defaultSbatchOptions">defaultSbatchOptions</a> :: <a href="Hyperion-Slurm-Sbatch.html#t:SbatchOptions" title="Hyperion.Slurm.Sbatch">SbatchOptions</a></li><li><a href="#v:maxSlurmJobs">maxSlurmJobs</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li><a href="#v:dataDir">dataDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:logDir">logDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:databaseDir">databaseDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:execDir">execDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:jobDir">jobDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:hyperionCommand">hyperionCommand</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:initialDatabase">initialDatabase</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li><a href="#v:sshRunCommand">sshRunCommand</a> :: <a href="Hyperion-WorkerCpuPool.html#t:SSHCommand" title="Hyperion.WorkerCpuPool">SSHCommand</a></li><li><a href="#v:emailAddr">emailAddr</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a></li></ul>}</li><li class="src short"><a href="#v:defaultHyperionConfig">defaultHyperionConfig</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="Hyperion-Config.html#t:HyperionConfig" title="Hyperion.Config">HyperionConfig</a></li><li class="src short"><a href="#v:newClusterEnv">newClusterEnv</a> :: <a href="Hyperion-Config.html#t:HyperionConfig" title="Hyperion.Config">HyperionConfig</a> -&gt; <a href="Hyperion-HoldServer.html#t:HoldMap" title="Hyperion.HoldServer">HoldMap</a> -&gt; <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Hyperion-Cluster.html#t:ClusterEnv" title="Hyperion.Cluster">ClusterEnv</a>, <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>)</li><li class="src short"><a href="#v:newDatabasePath">newDatabasePath</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="Hyperion-ProgramId.html#t:ProgramId" title="Hyperion.ProgramId">ProgramId</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li><li class="src short"><a href="#v:timedProgramDir">timedProgramDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="Hyperion-ProgramId.html#t:ProgramId" title="Hyperion.ProgramId">ProgramId</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HyperionConfig" class="def">HyperionConfig</a> <a href="src/Hyperion.Config.html#HyperionConfig" class="link">Source</a> <a href="#t:HyperionConfig" class="selflink">#</a></p><div class="doc"><p>Global configuration for <a href="Hyperion.html">Hyperion</a> cluster. </p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HyperionConfig" class="def">HyperionConfig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:defaultSbatchOptions" class="def">defaultSbatchOptions</a> :: <a href="Hyperion-Slurm-Sbatch.html#t:SbatchOptions" title="Hyperion.Slurm.Sbatch">SbatchOptions</a></dfn><div class="doc"><p>Default options to use for <code>sbatch</code> submissions</p></div></li><li><dfn class="src"><a id="v:maxSlurmJobs" class="def">maxSlurmJobs</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a></dfn><div class="doc"><p>Maximum number of jobs to submit at a time</p></div></li><li><dfn class="src"><a id="v:dataDir" class="def">dataDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>Base directory for working dirs produced by <code><a href="Hyperion-Cluster.html#v:newWorkDir" title="Hyperion.Cluster">newWorkDir</a></code></p></div></li><li><dfn class="src"><a id="v:logDir" class="def">logDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>Base directory for all the log files </p></div></li><li><dfn class="src"><a id="v:databaseDir" class="def">databaseDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>Base directory for databases</p></div></li><li><dfn class="src"><a id="v:execDir" class="def">execDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>Base directory for copies of the main executable</p></div></li><li><dfn class="src"><a id="v:jobDir" class="def">jobDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>Base directory for SLURM job files</p></div></li><li><dfn class="src"><a id="v:hyperionCommand" class="def">hyperionCommand</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>The command to run the main executable. Automatic if <code><a href="../base-4.14.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> (see <code><a href="Hyperion-Config.html#v:newClusterEnv" title="Hyperion.Config">newClusterEnv</a></code>)</p></div></li><li><dfn class="src"><a id="v:initialDatabase" class="def">initialDatabase</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a></dfn><div class="doc"><p>The database from which to initiate the program database</p></div></li><li><dfn class="src"><a id="v:sshRunCommand" class="def">sshRunCommand</a> :: <a href="Hyperion-WorkerCpuPool.html#t:SSHCommand" title="Hyperion.WorkerCpuPool">SSHCommand</a></dfn><div class="doc"><p>The command used to run <code>ssh</code> on nodes. Usually can be safely set to
 <code><a href="../base-4.14.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>. See <code><a href="Hyperion-WorkerCpuPool.html#t:SSHCommand" title="Hyperion.WorkerCpuPool">SSHCommand</a></code> for details.</p></div></li><li><dfn class="src"><a id="v:emailAddr" class="def">emailAddr</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc"><p>Email address for cluster notifications from
 hyperion. Nothing means no emails will be sent. Note that this
 setting can be different from the one in defaultSbatchOptions,
 which controls notifications from SLURM.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultHyperionConfig" class="def">defaultHyperionConfig</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="Hyperion-Config.html#t:HyperionConfig" title="Hyperion.Config">HyperionConfig</a> <a href="src/Hyperion.Config.html#defaultHyperionConfig" class="link">Source</a> <a href="#v:defaultHyperionConfig" class="selflink">#</a></p><div class="doc"><p>Default configuration, with all paths built form a single
 <code>baseDirectory</code></p></div></div><div class="top"><p class="src"><a id="v:newClusterEnv" class="def">newClusterEnv</a> :: <a href="Hyperion-Config.html#t:HyperionConfig" title="Hyperion.Config">HyperionConfig</a> -&gt; <a href="Hyperion-HoldServer.html#t:HoldMap" title="Hyperion.HoldServer">HoldMap</a> -&gt; <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="Hyperion-Cluster.html#t:ClusterEnv" title="Hyperion.Cluster">ClusterEnv</a>, <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a>) <a href="src/Hyperion.Config.html#newClusterEnv" class="link">Source</a> <a href="#v:newClusterEnv" class="selflink">#</a></p><div class="doc"><p>Takes <code><a href="Hyperion-Config.html#t:HyperionConfig" title="Hyperion.Config">HyperionConfig</a></code> and returns <code><a href="Hyperion-Cluster.html#t:ClusterEnv" title="Hyperion.Cluster">ClusterEnv</a></code>, the path to the executable,
 and a new 'HoldMap.</p><p>Things to note: </p><ul><li><code><a href="Hyperion-Cluster.html#v:programId" title="Hyperion.Cluster">programId</a></code> is generated randomly.</li><li>If <code><a href="Hyperion-Config.html#v:hyperionCommand" title="Hyperion.Config">hyperionCommand</a></code> is specified in <code><a href="Hyperion-Config.html#t:HyperionConfig" title="Hyperion.Config">HyperionConfig</a></code>, then
       <code>hyperionExec</code> == <code><a href="Hyperion-Config.html#v:hyperionCommand" title="Hyperion.Config">hyperionCommand</a></code>. Otherwise the running executable 
       is copied to <code><a href="Hyperion-Config.html#v:execDir" title="Hyperion.Config">execDir</a></code> with a unique name, and that is used as <code>hyperionExec</code>.</li><li><code><a href="Hyperion-Config.html#v:newDatabasePath" title="Hyperion.Config">newDatabasePath</a></code> is used to determine <code><a href="Hyperion-Cluster.html#v:programDatabase" title="Hyperion.Cluster">programDatabase</a></code> from <code><a href="Hyperion-Config.html#v:initialDatabase" title="Hyperion.Config">initialDatabase</a></code>
       and <code><a href="Hyperion-Config.html#v:databaseDir" title="Hyperion.Config">databaseDir</a></code>, <code><a href="Hyperion-Cluster.html#v:programId" title="Hyperion.Cluster">programId</a></code>.</li><li><code><a href="Hyperion-Config.html#v:timedProgramDir" title="Hyperion.Config">timedProgramDir</a></code> is used to determine <code><a href="Hyperion-Cluster.html#v:programLogDir" title="Hyperion.Cluster">programLogDir</a></code> and <code><a href="Hyperion-Cluster.html#v:programDataDir" title="Hyperion.Cluster">programDataDir</a></code> 
       from the values in <code><a href="Hyperion-Config.html#t:HyperionConfig" title="Hyperion.Config">HyperionConfig</a></code> and <code><a href="Hyperion-Cluster.html#v:programId" title="Hyperion.Cluster">programId</a></code>.</li><li><code><a href="Hyperion-Cluster.html#v:slurmWorkerLauncher" title="Hyperion.Cluster">slurmWorkerLauncher</a></code> is used for <code><a href="Hyperion-Cluster.html#v:clusterWorkerLauncher" title="Hyperion.Cluster">clusterWorkerLauncher</a></code></li><li><code><a href="Hyperion-Cluster.html#v:clusterDatabaseRetries" title="Hyperion.Cluster">clusterDatabaseRetries</a></code> is set to <code><a href="Hyperion-Cluster.html#v:defaultDBRetries" title="Hyperion.Cluster">defaultDBRetries</a></code>.</li></ul></div></div><div class="top"><p class="src"><a id="v:newDatabasePath" class="def">newDatabasePath</a> :: <a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="Hyperion-ProgramId.html#t:ProgramId" title="Hyperion.ProgramId">ProgramId</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> <a href="src/Hyperion.Config.html#newDatabasePath" class="link">Source</a> <a href="#v:newDatabasePath" class="selflink">#</a></p><div class="doc"><p>Returns the path to a new database, given <code><a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> inital database filepath
 and base directory</p><p>If <code><a href="Hyperion-ProgramId.html#t:ProgramId" title="Hyperion.ProgramId">ProgramId</a></code> id is <code>XXXXX</code> and initial database filename is <code>original.sqlite</code>,
 then the new filename is <code>original-XXXXX.sqlite</code>. If initial database path is
 <code><a href="../base-4.14.1.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>, then the filename is <code>XXXXX.sqlite</code>.</p><p>The path is in subdirectory <code>YYYY-mm</code> (determined by current date) of base directory. </p><p>If inital database is given, then the new database is initilized with its contents.</p></div></div><div class="top"><p class="src"><a id="v:timedProgramDir" class="def">timedProgramDir</a> :: <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> -&gt; <a href="Hyperion-ProgramId.html#t:ProgramId" title="Hyperion.ProgramId">ProgramId</a> -&gt; <a href="../base-4.14.1.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.14.1.0/System-IO.html#t:FilePath" title="System.IO">FilePath</a> <a href="src/Hyperion.Config.html#timedProgramDir" class="link">Source</a> <a href="#v:timedProgramDir" class="selflink">#</a></p><div class="doc"><p>Given base directory and <code><a href="Hyperion-ProgramId.html#t:ProgramId" title="Hyperion.ProgramId">ProgramId</a></code> (<code>==XXXXX</code>), returns the <code>YYYY-mm/XXXXX</code> 
 subdirectory of the base directory (determined by current date).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>