<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hyperion.Database.KeyValMap</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">hyperion-0.1.0.0</span><ul class="links" id="page-menu"><li><a href="src/Hyperion.Database.KeyValMap.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Hyperion.Database.KeyValMap</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">General comments</a></li><li><a href="#g:2">Convention on DB entries with the same key</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:KeyValMap">KeyValMap</a> a b = <a href="#v:KeyValMap">KeyValMap</a> {<ul class="subs"><li><a href="#v:kvMapName">kvMapName</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a></li></ul>}</li><li class="src short"><a href="#v:setupKeyValTable">setupKeyValTable</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m) =&gt; m ()</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:JsonField">JsonField</a> a = <a href="#v:JsonField">JsonField</a> a</li><li class="src short"><a href="#v:insert">insert</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; a -&gt; b -&gt; m ()</li><li class="src short"><a href="#v:lookup">lookup</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; a -&gt; m (<a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b)</li><li class="src short"><a href="#v:lookupAll">lookupAll</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> a, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; m [(a, b)]</li><li class="src short"><a href="#v:lookupDefault">lookupDefault</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; b -&gt; a -&gt; m b</li><li class="src short"><a href="#v:memoizeWithMap">memoizeWithMap</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> b, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; (a -&gt; m b) -&gt; a -&gt; m b</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>General comments</h1></a><div class="doc"><p><a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a> provides various actions with Sqlite
 DB using <code><a href="Hyperion-Database-HasDB.html#v:withConnection" title="Hyperion.Database.HasDB">withConnection</a></code> from <a href="Hyperion-Database-HasDB.html">Hyperion.Database.HasDB</a>.</p><p>The DB contains entries for <code><a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a></code>: given <code><a href="Hyperion-Database-KeyValMap.html#v:kvMapName" title="Hyperion.Database.KeyValMap">kvMapName</a></code> and a
 key, DB can produce value or values for the key.  We think about
 this as a map, i.e. there is a preferred value for each key for a
 given <code><a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a></code>, even if DB contains the key several times. This
 is described below.</p><p>The keys and values are represented by JSON encoding of Haskell
 values. <a href="../aeson-1.5.5.1/Data-Aeson.html">Data.Aeson</a> is used to perform encoding/decoding.  Thus,
 the keys and the values should implement <code><a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a></code>/<code><a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a></code>
 appropriately.</p></div><a href="#g:2" id="g:2"><h1>Convention on DB entries with the same key</h1></a><div class="doc"><p>The database table for a <code><a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a></code> can contain multiple entries
 with the same key. In this case, the newest entry is the active
 one. Older entries are always ignored. Thus, an update can be
 achieved by inserting a new key val pair.</p><p>The reason for this choice is that newer programs should not modify
 data associated with old programs. However, a new program may
 lookup data from old programs. This convention allows one to change
 the data that a new program sees without violating the above
 constraint.</p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:KeyValMap" class="def">KeyValMap</a> a b <a href="src/Hyperion.Database.KeyValMap.html#KeyValMap" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></p><div class="doc"><p>Type for <code><a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a></code> holds the types of key and value, but only
 contains <code><a href="Hyperion-Database-KeyValMap.html#v:kvMapName" title="Hyperion.Database.KeyValMap">kvMapName</a></code> the name of the map</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:KeyValMap" class="def">KeyValMap</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:kvMapName" class="def">kvMapName</a> :: <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:KeyValMap">Instances</h4><details id="i:KeyValMap" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:Eq:1"></span> <a href="../base-4.14.1.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:Ord:2"></span> <a href="../base-4.14.1.0/Data-Ord.html#t:Ord" title="Data.Ord">Ord</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:Ord:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-Ord.html#t:Ordering" title="Data.Ord">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b <a href="#v:min" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:Show:3"></span> <a href="../base-4.14.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:Show:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.14.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b] -&gt; <a href="../base-4.14.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:Generic:4"></span> <a href="../base-4.14.1.0/GHC-Generics.html#t:Generic" title="GHC.Generics">Generic</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:Generic:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../base-4.14.1.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b) :: <a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base-4.14.1.0/Data-Kind.html#t:Type" title="Data.Kind">Type</a> <a href="#t:Rep" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:from">from</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../base-4.14.1.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b) x <a href="#v:from" class="selflink">#</a></p><p class="src"><a href="#v:to">to</a> :: <a href="../base-4.14.1.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b) x -&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b <a href="#v:to" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:ToJSON:5"></span> <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:ToJSON:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toJSON">toJSON</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="#v:toJSON" class="selflink">#</a></p><p class="src"><a href="#v:toEncoding">toEncoding</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../aeson-1.5.5.1/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="#v:toEncoding" class="selflink">#</a></p><p class="src"><a href="#v:toJSONList">toJSONList</a> :: [<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b] -&gt; <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> <a href="#v:toJSONList" class="selflink">#</a></p><p class="src"><a href="#v:toEncodingList">toEncodingList</a> :: [<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b] -&gt; <a href="../aeson-1.5.5.1/Data-Aeson-Encoding-Internal.html#t:Encoding" title="Data.Aeson.Encoding.Internal">Encoding</a> <a href="#v:toEncodingList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:FromJSON:6"></span> <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:FromJSON:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:parseJSON">parseJSON</a> :: <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:Parser" title="Data.Aeson.Types">Parser</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b) <a href="#v:parseJSON" class="selflink">#</a></p><p class="src"><a href="#v:parseJSONList">parseJSONList</a> :: <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:Value" title="Data.Aeson.Types">Value</a> -&gt; <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:Parser" title="Data.Aeson.Types">Parser</a> [<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b] <a href="#v:parseJSONList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:Binary:7"></span> <a href="../binary-0.8.8.0/Data-Binary.html#t:Binary" title="Data.Binary">Binary</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:Binary:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:put">put</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; <a href="../binary-0.8.8.0/Data-Binary-Put.html#t:Put" title="Data.Binary.Put">Put</a> <a href="#v:put" class="selflink">#</a></p><p class="src"><a href="#v:get">get</a> :: <a href="../binary-0.8.8.0/Data-Binary-Get-Internal.html#t:Get" title="Data.Binary.Get.Internal">Get</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b) <a href="#v:get" class="selflink">#</a></p><p class="src"><a href="#v:putList">putList</a> :: [<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b] -&gt; <a href="../binary-0.8.8.0/Data-Binary-Put.html#t:Put" title="Data.Binary.Put">Put</a> <a href="#v:putList" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:ToField:8"></span> ToField (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-66" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc"><p><code><a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a></code> is an instance of <code>ToField</code> in order to use with Sqlite</p></td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:ToField:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toField">toField</a> :: <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; SQLData</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:KeyValMap:Rep:9"></span> <span class="keyword">type</span> <a href="../base-4.14.1.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-63" class="link">Source</a> <a href="#t:KeyValMap" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:KeyValMap:Rep:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="src"><span class="keyword">type</span> <a href="../base-4.14.1.0/GHC-Generics.html#t:Rep" title="GHC.Generics">Rep</a> (<a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b) = <a href="../base-4.14.1.0/GHC-Generics.html#t:D1" title="GHC.Generics">D1</a> ('<a href="../base-4.14.1.0/GHC-Generics.html#v:MetaData" title="GHC.Generics">MetaData</a> &quot;KeyValMap&quot; &quot;Hyperion.Database.KeyValMap&quot; &quot;hyperion-0.1.0.0-BChDBJtiU1m4GBpewNuAxw&quot; '<a href="../base-4.14.1.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.14.1.0/GHC-Generics.html#t:C1" title="GHC.Generics">C1</a> ('<a href="../base-4.14.1.0/GHC-Generics.html#v:MetaCons" title="GHC.Generics">MetaCons</a> &quot;KeyValMap&quot; '<a href="../base-4.14.1.0/GHC-Generics.html#v:PrefixI" title="GHC.Generics">PrefixI</a> '<a href="../base-4.14.1.0/Data-Bool.html#v:True" title="Data.Bool">True</a>) (<a href="../base-4.14.1.0/GHC-Generics.html#t:S1" title="GHC.Generics">S1</a> ('<a href="../base-4.14.1.0/GHC-Generics.html#v:MetaSel" title="GHC.Generics">MetaSel</a> ('<a href="../base-4.14.1.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a> &quot;kvMapName&quot;) '<a href="../base-4.14.1.0/GHC-Generics.html#v:NoSourceUnpackedness" title="GHC.Generics">NoSourceUnpackedness</a> '<a href="../base-4.14.1.0/GHC-Generics.html#v:NoSourceStrictness" title="GHC.Generics">NoSourceStrictness</a> '<a href="../base-4.14.1.0/GHC-Generics.html#v:DecidedLazy" title="GHC.Generics">DecidedLazy</a>) (<a href="../base-4.14.1.0/GHC-Generics.html#t:Rec0" title="GHC.Generics">Rec0</a> <a href="../text-1.2.4.1/Data-Text.html#t:Text" title="Data.Text">Text</a>)))</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:setupKeyValTable" class="def">setupKeyValTable</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m) =&gt; m () <a href="src/Hyperion.Database.KeyValMap.html#setupKeyValTable" class="link">Source</a> <a href="#v:setupKeyValTable" class="selflink">#</a></p><div class="doc"><p><code><a href="Hyperion-Database-KeyValMap.html#v:setupKeyValTable" title="Hyperion.Database.KeyValMap">setupKeyValTable</a></code> creates the table &quot;hyperion_key_val&quot; if it
 doesn't yet exist.  This table will hold the map-key-val entries.</p><p>The entry format is <code>program_id, kv_map, key, val, created_at</code>.
 These are the program id, map name, key, value, and timestamp,
 respectively.</p><p><code>program_id</code> is not used in lookups</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:JsonField" class="def">JsonField</a> a <a href="src/Hyperion.Database.KeyValMap.html#JsonField" class="link">Source</a> <a href="#t:JsonField" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:JsonField" class="def">JsonField</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:JsonField">Instances</h4><details id="i:JsonField" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:JsonField:ToField:1"></span> <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a =&gt; ToField (<a href="Hyperion-Database-KeyValMap.html#t:JsonField" title="Hyperion.Database.KeyValMap">JsonField</a> a)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-104" class="link">Source</a> <a href="#t:JsonField" class="selflink">#</a></td><td class="doc"><p>Make <code><a href="Hyperion-Database-KeyValMap.html#t:JsonField" title="Hyperion.Database.KeyValMap">JsonField</a></code> an instance of <code>ToField</code>.</p></td></tr><tr><td colspan="2"><details id="i:id:JsonField:ToField:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toField">toField</a> :: <a href="Hyperion-Database-KeyValMap.html#t:JsonField" title="Hyperion.Database.KeyValMap">JsonField</a> a -&gt; SQLData</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:JsonField:FromField:2"></span> (<a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> a) =&gt; FromField (<a href="Hyperion-Database-KeyValMap.html#t:JsonField" title="Hyperion.Database.KeyValMap">JsonField</a> a)</span> <a href="src/Hyperion.Database.KeyValMap.html#line-96" class="link">Source</a> <a href="#t:JsonField" class="selflink">#</a></td><td class="doc"><p>Make <code><a href="Hyperion-Database-KeyValMap.html#t:JsonField" title="Hyperion.Database.KeyValMap">JsonField</a></code> an instance of <code>FromField</code>. First turns the field into Text and then tries to decode JSON.
 Returns <code>Errors</code> or <code>Ok</code> with the result.</p></td></tr><tr><td colspan="2"><details id="i:id:JsonField:FromField:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Hyperion-Database-KeyValMap.html">Hyperion.Database.KeyValMap</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromField">fromField</a> :: FieldParser (<a href="Hyperion-Database-KeyValMap.html#t:JsonField" title="Hyperion.Database.KeyValMap">JsonField</a> a)</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:insert" class="def">insert</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; a -&gt; b -&gt; m () <a href="src/Hyperion.Database.KeyValMap.html#insert" class="link">Source</a> <a href="#v:insert" class="selflink">#</a></p><div class="doc"><p>Inserts an map-key-val entry into the database.</p><p>If fails, retries using <code><a href="Hyperion-Database-HasDB.html#v:withConnectionRetry" title="Hyperion.Database.HasDB">withConnectionRetry</a></code></p></div></div><div class="top"><p class="src"><a id="v:lookup" class="def">lookup</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; a -&gt; m (<a href="../base-4.14.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) <a href="src/Hyperion.Database.KeyValMap.html#lookup" class="link">Source</a> <a href="#v:lookup" class="selflink">#</a></p><div class="doc"><p>Looks up a value in the database given the map name and the
 key. Takes the most recent matching entry according to the
 convention.</p><p>If fails, retries using <code><a href="Hyperion-Database-HasDB.html#v:withConnectionRetry" title="Hyperion.Database.HasDB">withConnectionRetry</a></code></p></div></div><div class="top"><p class="src"><a id="v:lookupAll" class="def">lookupAll</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> a, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; m [(a, b)] <a href="src/Hyperion.Database.KeyValMap.html#lookupAll" class="link">Source</a> <a href="#v:lookupAll" class="selflink">#</a></p><div class="doc"><p>Returns the list of all kev-value pairs for a given map. Again
 only keeps the latest versino of the value accroding to the
 convention.</p><p>If fails, retries using <code><a href="Hyperion-Database-HasDB.html#v:withConnectionRetry" title="Hyperion.Database.HasDB">withConnectionRetry</a></code></p></div></div><div class="top"><p class="src"><a id="v:lookupDefault" class="def">lookupDefault</a> :: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b) =&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b -&gt; b -&gt; a -&gt; m b <a href="src/Hyperion.Database.KeyValMap.html#lookupDefault" class="link">Source</a> <a href="#v:lookupDefault" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Hyperion-Database-KeyValMap.html#v:lookup" title="Hyperion.Database.KeyValMap">lookup</a></code> but with a default value provided</p></div></div><div class="top"><p class="src"><a id="v:memoizeWithMap" class="def">memoizeWithMap</a> <a href="src/Hyperion.Database.KeyValMap.html#memoizeWithMap" class="link">Source</a> <a href="#v:memoizeWithMap" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="../base-4.14.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="../mtl-2.2.2/Control-Monad-Reader-Class.html#t:MonadReader" title="Control.Monad.Reader.Class">MonadReader</a> env m, <a href="Hyperion-Database-HasDB.html#t:HasDB" title="Hyperion.Database.HasDB">HasDB</a> env, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadCatch" title="Control.Monad.Catch">MonadCatch</a> m, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> a, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:ToJSON" title="Data.Aeson.Types">ToJSON</a> b, <a href="../base-4.14.1.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> b, <a href="../aeson-1.5.5.1/Data-Aeson-Types.html#t:FromJSON" title="Data.Aeson.Types">FromJSON</a> b)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a> a b</td><td class="doc"><p>The <code><a href="Hyperion-Database-KeyValMap.html#t:KeyValMap" title="Hyperion.Database.KeyValMap">KeyValMap</a></code> in which to memoize</p></td></tr><tr><td class="src">-&gt; (a -&gt; m b)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; m b</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>This implements memoization using the DB.  Given a function, it
 first tries to look up the function result in the DB and if no
 result is available, runs the function and inserts the result into
 the DB</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.0</p></div></body></html>